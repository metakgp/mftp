# Migration

export_database.py contains script to migrate the default database from one instance of MongoDB to another.

NOTE: Requires Python 3.10

## Usage

If you want to migrate source DB to target DB, required arguments:

1. URI for source database using flag

    `--source or -s`

2. URI for target database using flag

    `--target or -t`

**If the script encounters any problem during the migration with any of the documents, it pushes them to defaulters.bson<br/>
If a document was already present in the target database, it pushes them to repeated_notices.bson**

If you want to further try to push from a bson file, required arguments:

1. URI for target database using flag

    `--target or -t`

2. Filename to push from using flag

    `--try-defaulters or -d`

## Examples

1. Default Export:

    `python export_database.py --source "<Source DB URI>" --target "<Target DB URI>"`

2. Adding documents from bson dump file (generated by script in case of errors) : defaulters.bson

    `python export_database.py --target "<Target DB URI>" --try-defaulters defaulters.bson`

**NOTE: Please provide URIs enclosed inside quotes to avoid any unnecessary parsing errors**